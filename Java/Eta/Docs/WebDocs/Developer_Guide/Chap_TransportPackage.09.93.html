<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>9.15.2.1 The Proxy Authentication Process</title>
    <link rel="StyleSheet" href="css/Chap_TransportPackage.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55718642-4', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table width="100%" align="left" role="presentation">
      <tr>
        <td class="WebWorks_Company_Name_Top" width="250">
          <div id="boxC">Transport API Java Edition</div>
        </td>
        <td width="30">
          <div id="boxB"></div>
        </td>
        <td width="*"></td>
        <td class="WebWorks_Company_Logo_Top" width="160">
          <div id="boxA">
            <img align="left" src="banner_logo.gif" alt="Transport API Java Edition" />
          </div>
        </td>
      </tr>
    </table>
    <br clear="all" />
    <hr align="left" />
    <blockquote>
      <div class="H4"><a name="1156280">The Proxy Authentication Process</a></div>
      <div class="Body"><a name="1154483">If a Transport API consumer’s connection is configured to connect to a provider via a proxy server (using HTTP or Encrypted tunneling) which requires authentication, the Transport API will automatically participate in the authentication process. The application must supply Transport API-valid credentials (described in </a><a href="javascript:WWHClickedPopup('Developer_Guide', 'Chap_TransportPackage.09.94.html', '');" title="9.15.2.2 Supplying the Transport API with Credentials for Proxy Authentication">Section 9.15.2.2</a>). Specifically, the Transport API automatically parses the list of supported authentication schemes (sent by the proxy), selects the most appropriate scheme, re-connects to the proxy (if necessary), and exchanges the messages required by the selected authentication scheme.</div>
      <div class="Body"><a name="1156507">A typical proxy authentication adheres to the following process:</a></div>
      <div class="bullet_ind_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="bullet_ind_inner" style="width: 18pt; white-space: nowrap">
                <span class="AG_bold">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="bullet_ind_inner"><a name="1154796">The consumer application uses either HTTP or HTTPS protocol to connect to a provider (e.g., an ADS, or a Transport API C provider application, not shown) via a proxy server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="bullet_ind_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="bullet_ind_inner" style="width: 18pt; white-space: nowrap">
                <span class="AG_bold">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="bullet_ind_inner"><a name="1154797">Because authentication is enabled on the proxy server, the proxy server sends an HTTP response to the application indicating authentication is required. This response contains the HTTP error code# 407, and includes a list of authentication schemes enabled on the proxy.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="indent_5"><a name="1154798">The initial response sent from the proxy server may also indicate that the connection between it and the consumer application will be closed.</a></div>
      <div class="bullet_ind_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="bullet_ind_inner" style="width: 18pt; white-space: nowrap">
                <span class="AG_bold">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="bullet_ind_inner"><a name="1154799">If the Transport API supports at least one of the authentication schemes specified in the list sent by the proxy server, it reconnects to the proxy (if necessary) and sends a message containing:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="dash_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="dash_inner" style="width: 18pt; white-space: nowrap">-	</div>
            </td>
            <td width="100%">
              <div class="dash_inner"><a name="1154800">The name of the authentication scheme it will use.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="dash_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="dash_inner" style="width: 18pt; white-space: nowrap">-	</div>
            </td>
            <td width="100%">
              <div class="dash_inner"><a name="1154801">The user credentials (e.g. a username and a password) encoded in the format prescribed by the authentication scheme.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="bullet_ind_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="bullet_ind_inner" style="width: 18pt; white-space: nowrap">
                <span class="AG_bold">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="bullet_ind_inner"><a name="1154802">The proxy server attempts to authenticate the user credentials provided by the application. Depending on the configuration of the proxy server and the authentication scheme, the proxy server may attempt to authenticate the credentials against an LDAP server, a Microsoft ActiveDirectory™ server, or its own credentials datastore.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="dash_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="dash_inner" style="width: 18pt; white-space: nowrap">-	</div>
            </td>
            <td width="100%">
              <div class="dash_inner"><a name="1154803">If the authentication scheme requires only that the application send a single message containing the user credentials (e.g., the BASIC authentication scheme), and the proxy server was able to successfully authenticate these credentials, then the proxy sends a response to the Transport API with the HTTP “OK” error code# 200, indicating a successful authentication.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="dash_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="dash_inner" style="width: 18pt; white-space: nowrap">-	</div>
            </td>
            <td width="100%">
              <div class="dash_inner"><a name="1154804">If the authentication scheme is NTLM (illustrated in </a><a href="javascript:WWHClickedPopup('Developer_Guide', 'Chap_TransportPackage.09.97.html', '');" title="9.15.2.5 Proxy Authentication using NTLM">Section 9.15.2.5</a>), then the authentication process requires a negotiation (i.e., multiple messages sent back and forth). After the initial message, the proxy server again sends a message to the Transport API containing HTTP error code #407, and (typically) additional handshaking details to be processed by the application. The Transport API uses this information to send a message back to the proxy server to continue the authentication process until authentication ultimately succeeds (or fails). When successful, the proxy sends a response to the Transport API with HTTP “OK” error code# 200.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="dash_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="dash_inner" style="width: 18pt; white-space: nowrap">-	</div>
            </td>
            <td width="100%">
              <div class="dash_inner"><a name="1154805">If the authentication scheme is Negotiate/Kerberos, (illustrated in </a><a href="javascript:WWHClickedPopup('Developer_Guide', 'Chap_TransportPackage.09.98.html', '');" title="9.15.2.6 Proxy Authentication using Negotiate/Kerberos">Section 9.15.2.6</a>) then the authentication process requires additional handshaking with a Domain Controller. After the proxy server sends a message to the Transport API containing HTTP error code #407, the Transport API does all the necessary Kerberos handshaking with the Domain Controller (which for Kerberos is the Key Distribution Center or KDC) to obtain the needed Kerberos service ticket. The Transport API uses this ticket to authenticate. When successful, the proxy sends a response to the Transport API with HTTP “OK” error code #200.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="bullet_ind_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="bullet_ind_inner" style="width: 18pt; white-space: nowrap">
                <span class="AG_bold">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="bullet_ind_inner"><a name="1156743">If authentication fails, the proxy server sends a response with an HTTP error code and text/HTML indicating the failure.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Chap_TransportPackage.09.01.html">Chapter 9	Transport Package Detailed View</a> : <a class="WebWorks_Breadcrumb_Link" href="Chap_TransportPackage.09.88.html">9.15	Tunneling</a> : <a class="WebWorks_Breadcrumb_Link" href="Chap_TransportPackage.09.92.html">9.15.2	Proxy Authentication</a> : 9.15.2.1	The Proxy Authentication Process</div>
    <br />
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>